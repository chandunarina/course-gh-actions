name: reusable-test

on: 
  workflow_dispatch: # manual triggering

env:
  APP_NAME: GHA_PRACTICE

jobs:
  call_build:
    name: call-build
    uses: ./.github/workflows/reusable-api-build.yml
    secrets: inherit
    with:
      build_configuration: Release
      environment: dev
  deploy:
    name: download build artifact from reusable build call flow
    runs-on: ubuntu-latest
    needs: 
      - call_build
    steps:
      - name: Download Artifact
        uses: actions/download-artifact@v4
        with:
          name: api_dll
          path: '.'
      - name: Print Artifact Files
        run: ls -R
